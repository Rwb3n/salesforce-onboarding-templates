# generated: 2025-10-08
# System Auto: last updated on: 2025-10-08 17:20:34
# INVEST-001: Jakob Page Layout Visibility & Export Limitation
<!-- Investigative Report using template v0.1 -->

**Investigation ID:** INVEST-001
**Date:** 2025-10-08
**Investigator:** [Your Name]
**Collaborators:** Andy Corbett (Salesforce Admin - investigation walkthrough and validation)
**Investigation Time:** ~2.5 hours (12:55pm - 4:25pm, includes collaboration)
**Related Task:** TASK-004 (Jakob Dashboard Export + Data Lineage)
**Template Version:** v0.1

---

## Header Block

**To:** Marian Dunn
**Subject:** RE: Access to dashboards - Investigation Findings
**Date:** 2025-10-08
**Investigator:** [Your Name]
**Collaborators:** Andy Corbett (page layout investigation and validation)
**Investigation Time:** ~2.5 hours

---

## Section 1: Problem Statement

**What seems to be Jakob's actual problem:**

Jakob is observing Opportunity records from the joined report while in the **London & Partners App (NOT Grow London Local App)**. When he drills down from the report to a specific opportunity record, he cannot see the **Registration Form** and **Graduation Form** related list sections that contain the data he sees in the report.

**Key observations:**

- Jakob can see graduation form data in the joined report
- When he clicks through to an individual opportunity (e.g., AgSenze), he doesn't see the related Registration/Graduation Form records
- He only sees the **Files** section, which contains PDFs generated from those records
- For AgSenze specifically: the related records exist in the database, but **no PDFs were generated**
- To Jakob, it looks like the data doesn't exist (because he can only see Files section, and there are no files)
- He's been relying on PDFs to view the data, but not all records have PDFs generated

**Users/Scope Affected:**

- **Number of users:** 21 users (all users with **Grow London Global** profile)
- **Severity:** P2 (High) - Blocks user productivity, but workaround exists (use report view)
- **Business Impact:** Economic analysis delayed, inability to drill down from report to record details, manual workarounds required to access data that exists but isn't visible

**Examples of affected records:**
- AgSenze - Early Stage opportunity (records exist, no PDFs generated)
- Agreed Earth - Early Stage opportunity (records exist, PDFs generated - visible to Jakob)

---

## Section 2: Investigation Process

**Diagnostic steps taken:**

**1. Verified Jakob's user context**
- Finding: Jakob using London & Partners App (correct for his role)
- Finding: Viewing Grow London Local Early Stage opportunities from joined report
- Finding: His profile is **Grow London Global**

**2. Compared visibility as different users**
- **as Admin:** I see a page layout that shows me the related records for opportunities (Registration Forms and Graduation Forms related lists visible)
- **as Jakob (simulated GLG profile):** Only Files section visible, no Registration Forms or Graduation Forms related lists
- Finding: Different page layouts being shown to different users

**3. Investigated page layout assignment**
- Record Type: Grow London Local Early Stage
- Page Layout assigned: **Early Stage Opportunity Record Page**
- Profiles that see this layout:
  - Compliance
  - **Grow London Early Stage** profile
  - Reply System Admin
  - System Administrator
- Finding: **Grow London Global profile NOT in this list**

**4. Identified default page layout for GLG profile**
- GLG profile (21 active users) sees: **Default Opportunity Record Page**
- This layout does NOT include Registration Form and Graduation Form related lists
- Finding: Profile-to-page-layout assignment mismatch

**5. Confirmed data existence**
- Checked AgSenze opportunity as Admin
- Finding: Registration Form and Graduation Form **records exist** in database
- Finding: No PDFs generated for AgSenze (Files section empty for Jakob)
- Jakob's perception: "No data exists" because he can't see related lists and no PDFs exist

**6. Tested joined report export options**
- Opened the joined report
- Clicked Export
- Finding: Only "Formatted Report" option available
- "Details Only" option NOT available
- Confirmed: This is a Salesforce limitation for joined reports (as Marian suspected)

**Tested scenarios:**
- **as Admin:** Can see Registration Form and Graduation Form related lists on all opportunities
- **as Jakob (GLG profile):** Can only see Files section, relies on PDFs which aren't always generated
- **Export as Admin:** Only "Formatted Report" available (confirmed platform limitation)

**Collaboration:**
- **Consulted with:** Andy Corbett (Salesforce Admin)
- **Process:** Walked through investigation findings together
- **Findings validated:**
  - Page layout assignment confirmed (GLG profile sees Default, not GLGES-specific layout)
  - Profile counts verified (21 GLG users, 2 GLE users)
  - Solution approach validated (create new layout vs. assign existing)

---

## Section 3: Root Cause Analysis

**Immediate cause:**

Jakob's profile (Grow London Global) is assigned the **Default Opportunity Record Page** layout when viewing Grow London Local Early Stage opportunities.

**Root cause:**

Page layout assignment configuration for the **Grow London Local Early Stage** record type only includes 4 specific profiles. The **Grow London Global** profile (21 users) is not assigned to the Early Stage Opportunity Record Page layout, so they see the Default layout which lacks the Registration Form and Graduation Form related lists.

**Contributing factors:**

1. **Profile-based page layout assignment:** Different profiles see different page layouts for the same record type
2. **PDF generation inconsistency:** Not all opportunities have PDFs generated from their Registration/Graduation Form records
3. **User dependency on PDFs:** Jakob (and likely other GLG users) have been relying on PDFs in the Files section to see form data, rather than the actual related records
4. **Record type specificity:** This only affects Grow London Local Early Stage opportunities (other record types may not have this visibility gap)

**Why this wasn't caught before:**

- GLG users may have been using the joined report exclusively (not drilling down to individual records)
- For opportunities where PDFs were generated, GLG users could see data via Files section (workaround masked the visibility gap)
- Possible that GLG profile visibility requirements weren't considered when GLGES-specific page layout was created
- May be by design initially (GLG users shouldn't see details), but Jakob's work requires access

---

## Section 4: Impact Assessment

**Current state:**

- 21 GLG profile users cannot see Registration Form and Graduation Form related lists on Grow London Local Early Stage opportunities
- Users are relying on PDFs in Files section to view form data
- When PDFs aren't generated (e.g., AgSenze), users think data doesn't exist
- Jakob cannot drill down from report to opportunity to detailed form records
- Workaround exists: Use joined report for all data viewing (don't drill down to individual records)

**If not fixed:**

- Ongoing inefficiency (report-only view limits analysis capability)
- Data perceived as missing when it exists (confusion, potential duplicate data entry)
- Economic analysis delayed (Jakob needs to drill down for detailed review)
- 21 GLG users potentially affected by same limitation (scope beyond just Jakob)

**Urgency:**

- Can wait for structured implementation (not critical emergency)
- Jakob has workaround (use report, export formatted and clean in Excel)
- Recommended timeline: Implement within 1-2 weeks, test with Jakob first

---

## Section 5: Solutions Considered

### Option A: Assign Existing GLGES Layout to GLG Profile

**Description:** Add Grow London Global profile to the page layout assignment for "Early Stage Opportunity Record Page" (the layout currently used by GLE, Compliance, Reply System Admin, System Admin profiles)

**Pros:**
- Quick fix (5 minutes to implement)
- Jakob immediately gets visibility to related lists
- No new layout to maintain

**Cons:**
- **"Too sudden"** - GLG users would see a completely different layout than they're used to
- All layout elements change, not just related lists addition
- 21 users affected with no communication/training
- Potentially unwanted visibility to other layout elements

**Decision:** ✗ **Rejected** - Too disruptive for 21 users, unfamiliar layout could cause confusion

---

### Option B: Create New Layout Based on GLG Current View + Add Related Lists

**Description:**
1. Clone the Default Opportunity Record Page layout (what GLG users currently see)
2. Add Registration Form related list to the cloned layout
3. Add Graduation Form related list to the cloned layout
4. Assign this new layout to Grow London Global profile for GLGES record type

**Pros:**
- Familiar layout (based on what GLG users already see)
- Targeted visibility (only adds the related lists needed)
- Best practices alignment (least privilege - don't change everything, just add what's needed)
- Maintains consistency for GLG users (everything else stays the same)
- Can test with Jakob first before full rollout to 21 users

**Cons:**
- Slightly more setup work than Option A (~30 minutes vs 5 minutes)
- Creates additional page layout to maintain

**Decision:** ✓ **Recommended** - Familiar layout, targeted visibility, best practices, testable with single user first

---

### Option C: Generate Missing PDFs (Workaround)

**Description:** For opportunities where PDFs haven't been generated (e.g., AgSenze), manually generate the PDFs so Jakob can see data via Files section

**Pros:**
- Quick fix for immediate issue (Jakob can see AgSenze data)
- No layout changes needed
- Minimal testing required

**Cons:**
- Doesn't solve root cause (Jakob still can't see related lists)
- Requires PDF generation for all missing records (ongoing manual work)
- Doesn't help other 20 GLG users with same visibility limitation
- Doesn't enable drill-down workflow (still limited to Files section)

**Decision:** ✗ **Rejected as primary solution** - Addresses symptom not root cause, doesn't scale, ongoing manual work required

---

## Section 6: Recommended Solution

**Proposed approach:**

**Create new page layout for Grow London Global profile with targeted visibility to Registration Form and Graduation Form related lists**

**Implementation steps:**

1. **Clone Default Opportunity Record Page layout**
   - Name: "Grow London Global - Opportunity Record Page" (or similar)
   - Base: Default Opportunity Record Page (familiar to GLG users)

2. **Add related lists to cloned layout:**
   - Add "Registration Forms" related list
   - Add "Graduation Forms" related list
   - Position: Below Files section (or appropriate location)

3. **Configure related list properties:**
   - Fields to display: [Determine with Marian - minimal fields for overview]
   - Sort order: [Determine with Marian]
   - Records to display: 5-10 per page (standard)

4. **Assign new layout to GLG profile:**
   - Setup → Object Manager → Opportunity → Page Layouts → Page Layout Assignment
   - For record type "Grow London Local Early Stage"
   - Assign new layout to "Grow London Global" profile

5. **Test with Jakob (single user validation):**
   - Jakob opens AgSenze opportunity
   - Verify: Registration Forms related list visible
   - Verify: Graduation Forms related list visible
   - Verify: Can see records even when PDFs not generated
   - Success criteria: Jakob can drill down from report → opportunity → form records

6. **Monitor and rollout:**
   - If successful with Jakob: Layout applies to all 21 GLG users automatically
   - Monitor for issues in first 24-48 hours
   - Check in with Jakob and other GLG users for feedback

**Rationale:**

- **Addresses root cause:** Page layout visibility, not just symptom (missing PDFs)
- **Best practices alignment:** Targeted visibility (only adds related lists, doesn't change familiar layout)
- **Minimal disruption:** GLG users see familiar layout + new related lists (not completely new layout)
- **Testable:** Can validate with Jakob first (single user) before affecting all 21 GLG users
- **Scalable:** Solves problem for all GLG users, not just Jakob

**What this will achieve:**

- ✓ Jakob can see Registration Form and Graduation Form records on opportunities
- ✓ Jakob can drill down from report → opportunity → form details (full analysis workflow)
- ✓ Data visibility independent of PDF generation (no more "missing data" perception)
- ✓ All 21 GLG users gain same visibility (consistent experience across profile)
- ✓ Maintains familiar layout for GLG users (minimizes change management)

---

## Section 7: Risk Assessment & Mitigation

**Potential risks:**

| Risk | Likelihood | Impact | Mitigation |
|------|------------|--------|------------|
| Exposing sensitive data to GLG users who shouldn't see it | Low | Medium | Confirm with Marian that GLG users should have access to Registration/Graduation Form data. Related lists show records, users still need appropriate permissions to view/edit. |
| GLG users confused by new related lists appearing | Low | Low | Related lists are additive (familiar layout maintained). Can communicate change to GLG users: "You now have visibility to Registration/Graduation Form records." |
| Performance impact (loading related lists on page) | Low | Low | Standard Salesforce functionality, related lists load asynchronously. Minimal performance impact expected. |
| Other GLG users don't need this visibility | Low | Low | If only Jakob needs access, can create user-specific page layout assignment (advanced). For now, assuming GLG profile scope is appropriate. |
| Breaking existing workflows for GLG users | Very Low | Low | Additive change only (adding related lists, not removing/changing existing elements). Familiar layout maintained. |

**Rollback plan:**

- **If issues occur:** Revert page layout assignment for GLG profile to Default Opportunity Record Page
- **Time to rollback:** 5 minutes (Setup → Page Layout Assignment → change back to Default)
- **Who to notify:** Jakob, Marian, any GLG users reporting issues
- **Data impact:** None (page layout change doesn't affect data, only visibility)

---

## Section 8: Testing & Validation Plan

**Pre-implementation testing:**

1. **Create layout in Production** (or Sandbox if available)
   - Clone Default Opportunity Record Page
   - Add Registration Form and Graduation Form related lists
   - Save new layout

2. **Assign to GLG profile for GLGES record type**
   - Verify assignment in Page Layout Assignment tool

3. **Test with Jakob (single user validation):**
   - Jakob logs in
   - Opens AgSenze - Early Stage opportunity (no PDFs, good test case)
   - Verifies Registration Forms related list visible
   - Verifies Graduation Forms related list visible
   - Clicks into a form record (verify can view details)
   - Opens Agreed Earth - Early Stage opportunity (PDFs exist, another test case)
   - Verifies related lists visible there too

**Success criteria:**

- ✓ Jakob can see "Registration Forms" related list on GLGES opportunities
- ✓ Jakob can see "Graduation Forms" related list on GLGES opportunities
- ✓ Related lists display records even when PDFs not generated (AgSenze test case)
- ✓ Jakob can click into form records from related lists (drill-down successful)
- ✓ No other layout elements changed (familiar layout maintained)
- ✓ No errors or performance issues reported

**Post-implementation monitoring:**

- **24-48 hours:** Monitor for any issues from 21 GLG users
- **Check in with Jakob:** "How's the new visibility working? Any issues?"
- **Check in with other GLG users:** Informal poll or email: "You now have visibility to Registration/Graduation Forms on opportunities - let us know if you have questions"
- **Watch for:** Confusion about new related lists, performance complaints, data access issues

---

## Section 9: Additional Issues Discovered

### Related Issue 1: Joined Report "Details Only" Export Limitation

**Description:**

Jakob requested ability to export the joined report with "Details Only" option (for Excel analysis). This option is not available for the joined report.

**Cause:**

Salesforce platform limitation - joined reports (reports combining multiple report blocks) do not support "Details Only" export. Only "Formatted Report" export is available.

**Testing performed:**

- Opened joined report as Admin
- Clicked Export
- Confirmed: Only "Formatted Report" option visible
- "Details Only" option NOT available
- Validated Marian's suspicion that this is due to joined report type

**Workaround (immediate solution):**

Jakob can export as "Formatted Report", then clean the data in Excel:
1. Export → Formatted Report
2. Open in Excel
3. Delete header rows, grouping rows, summary rows
4. Keep only detail data rows
5. Use for analysis

**Long-term solution (if needed):**

- Create separate standard reports (not joined) for each report block
- Export each with "Details Only" option
- Combine in Excel manually
- Trade-off: More steps, but gets clean detail data

**Impact:**

- Low impact (workaround is functional, takes 2-3 extra minutes)
- Jakob comfortable with Excel data cleanup
- Not urgent to solve differently

---

## Section 10: Next Steps & Approval Request

**Awaiting your guidance on:**

1. **Page layout solution approval:** Is the proposed approach (new layout for GLG profiles with added related lists) acceptable?

2. **Scope confirmation:** Should all 21 GLG users get this visibility, or should it be limited to specific users (e.g., just Jakob)?

3. **Related list configuration:** What fields should be displayed in the Registration Form and Graduation Form related lists? (I can propose defaults, but want your input)

4. **Timing:** When should this be implemented? (Can do immediately, or schedule for specific time)

**Once approved, I will:**

1. Create new page layout (cloned from Default + related lists added)
2. Assign to Grow London Global profile for GLGES record type
3. Test with Jakob (validate functionality)
4. Monitor for issues (24-48 hours)
5. Respond to Jakob with:
   - Explanation of page layout issue (root cause)
   - Solution implemented (new visibility to related lists)
   - Export workaround (formatted report → Excel cleanup)
6. Document this investigation for future reference (add to support docs)

**Timeline:**

- **Implementation:** 30-45 minutes (layout creation + assignment + testing)
- **Jakob notification:** Same day as implementation
- **Monitoring:** 24-48 hours post-implementation

---

## Optional Sections

### Replication Steps (For Future Reference)

**To reproduce the visibility issue:**

1. Log in as user with **Grow London Global** profile (or simulate)
2. Navigate to London & Partners App
3. Open any **Grow London Local Early Stage** opportunity record
4. Observe: Only Files section visible in related lists area
5. Expected: Should see Registration Forms and Graduation Forms related lists
6. Actual: Does not see those related lists (sees Default Opportunity Page Layout instead of GLGES-specific layout)

**To reproduce the export limitation:**

1. Open the joined report (Grow London Local opportunities + Registration/Graduation Forms)
2. Click "Export" button
3. Observe: Only "Formatted Report" option available
4. Expected (for standard reports): "Details Only" and "Formatted Report" options
5. Actual: Only "Formatted Report" (joined report limitation)

### Change Management Considerations

**Deployment method:** Direct in Production (or Sandbox → Production if sandbox available)

**User communication needed:**

Yes - brief email to GLG users (21 people):

*Subject: New Visibility to Registration/Graduation Forms on Opportunities*

*Hi team,*

*You now have visibility to Registration Forms and Graduation Forms related lists when viewing Grow London Local Early Stage opportunities.*

*This means you can see the form records directly on the opportunity page, even if PDFs haven't been generated yet.*

*If you have questions or notice any issues, please let me know.*

*Thanks,*
*[Your name]*

**Training required:**

No formal training needed. Related lists are standard Salesforce UI. Users familiar with related lists already (Contacts, Opportunities, etc.). May answer individual questions if users ask "What are these new sections?"

**Timing:**

No specific timing constraints. Can implement during business hours (change is additive, low risk). Avoid end-of-day Friday (gives monitoring time during week).

### Documentation Updates Required

**After implementation:**

1. **Support docs:** Add to TASK-002/TASK-005 documentation
   - Issue: Page layout visibility gap for GLG users
   - Solution: Created GLG-specific layout with related lists
   - For future: Check page layout assignments when users report visibility issues

2. **Configuration documentation:** Document page layout assignment for GLGES record type
   - Default: Default Opportunity Page Layout (most profiles)
   - GLG Profile: Grow London Global - Opportunity Record Page (custom)
   - GLE Profile: Early Stage Opportunity Record Page (specific to Early Stage workflow)

3. **FAQ entry:** "I can't see Registration/Graduation Forms on opportunities"
   - Check your profile
   - Check record type of opportunity
   - Contact support if issue persists

### Time Investment Tracking

**Investigation:** 2.5 hours
- Initial diagnostic: 30 minutes
- Andy collaboration: 45 minutes
- Testing (export validation): 15 minutes
- Solution design: 30 minutes
- Report writing: 30 minutes

**Collaboration:** 45 minutes with Andy Corbett

**Documentation:** 30 minutes (this report)

**Total:** ~3.5 hours (investigation + collaboration + documentation)

---

## Summary for Quick Reference

**Problem:** Jakob (and 21 GLG users) can't see Registration/Graduation Form related lists on Grow London Local Early Stage opportunities

**Root Cause:** Page layout assignment mismatch - GLG profile sees Default layout (no related lists) instead of GLGES-specific layout

**Solution:** Create new layout for GLG profiles with related lists added (familiar layout + targeted visibility)

**Additional Issue:** Joined report export "Details Only" not available (Salesforce limitation, workaround provided)

**Next Step:** Awaiting Marian's approval to proceed with implementation

**Impact:** 21 users, P2 severity, workaround exists, recommended implementation within 1-2 weeks

---

**Investigation completed:** 2025-10-08 17:15
**Report template version:** v0.1
**Status:** Awaiting approval to implement solution
**File location:** `LP-Intelligence/investigations/INVEST-001-jakob-page-layout-visibility.md`
